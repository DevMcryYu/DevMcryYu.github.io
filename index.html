<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="间歇性热爱学习">
<meta property="og:type" content="website">
<meta property="og:title" content="DevMcry">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="DevMcry">
<meta property="og:description" content="间歇性热爱学习">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="DevMcry">
<meta name="twitter:description" content="间歇性热爱学习">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>DevMcry</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">DevMcry</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/10/30/JSON学习笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="DevMcry">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevMcry">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/10/30/JSON学习笔记/" itemprop="url">JSON学习笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-10-30T16:24:41+08:00">
                2018-10-30
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h2 id="什么是-JSON-？"><a href="#什么是-JSON-？" class="headerlink" title="什么是 JSON ？"></a>什么是 JSON ？</h2><blockquote>
<p>JSON 指的是 JavaScript 对象表示法（JavaScript Object Notation）<br>JSON 是轻量级的文本数据交换格式<br>JSON 独立于语言 *<br>JSON 具有自我描述性，更易理解</p>
</blockquote>
<p>JSON 使用 JavaScript 语法来描述数据对象，但是 JSON 仍然独立于 <strong>语言</strong> 和 <strong>平台</strong>。JSON 解析器和 JSON 库支持许多不同的编程语言。</p>
<h2 id="JSON-语法规则"><a href="#JSON-语法规则" class="headerlink" title="JSON 语法规则"></a>JSON 语法规则</h2><blockquote>
<p>对象表示为键值对<br> 数据由逗号分隔<br> 花括号保存对象<br> 方括号保存数组</p>
</blockquote>
<p>在 JS 语言中，一切都是 <strong>对象</strong> 。因此，任何支持的类型都可以通过 JSON 来表示，例如字符串、数字、对象、数组等。但是对象和数组是比较特殊且常用的两种类型：  </p>
<p><strong>对象</strong> ：对象在 JS 中是使用花括号包裹 {} 起来的内容，数据结构为 <code>{key1：value1, key2：value2, ...}</code> 的键值对结构。在面向对象的语言中，key 为对象的属性，value 为对应的值。键名可以使用整数和字符串来表示。值的类型可以是任意类型。<br><strong>数组</strong> ：数组在 JS 中是方括号 [] 包裹起来的内容，数据结构为 <code>[&quot;java&quot;, &quot;javascript&quot;, &quot;vb&quot;, ...]</code> 的索引结构。在 JS 中，数组是一种比较特殊的数据类型，它也可以像对象那样使用键值对，但还是索引使用得多。同样，值的类型可以是任意类型。</p>
<h2 id="JSON-键值对"><a href="#JSON-键值对" class="headerlink" title="JSON 键值对"></a>JSON 键值对</h2><p>JSON 键值对是用来保存 JS 对象的一种方式，和 JS 对象的写法也大同小异，键值对组合中的键名写在前面并用双引号包裹，使用冒号分隔，然后紧接着值：<code>{&quot;firstname&quot;: &quot;Json&quot;}</code> 。<br>JSON 的值可以是 ：  </p>
<ul>
<li>数字(整数或浮点数)</li>
<li>字符串(在双引号中)</li>
<li>逻辑值(true 或 false)</li>
<li>数组(在方括号里)</li>
<li>对象(在花括号里)</li>
<li>null</li>
</ul>
<h2 id="JSON-在-Android-开发中的运用"><a href="#JSON-在-Android-开发中的运用" class="headerlink" title="JSON 在 Android 开发中的运用"></a>JSON 在 Android 开发中的运用</h2><h3 id="官方JSON类"><a href="#官方JSON类" class="headerlink" title="官方JSON类"></a>官方JSON类</h3><h2 id="org-json"><a href="#org-json" class="headerlink" title="org.json"></a>org.json</h2><table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>JSONArray</td>
<td>A dense indexed sequence of values.</td>
</tr>
<tr>
<td>JSONObject</td>
<td>A modifiable set of name/value mappings.</td>
</tr>
<tr>
<td>JSONStringer</td>
<td>Implements <code>JSONObject.toString()</code> and <code>JSONArray.toString()</code>.</td>
</tr>
<tr>
<td>JSONTokener</td>
<td>Parses a JSON ( RFC 4627 ) encoded string into the corresponding object.</td>
</tr>
</tbody>
</table>
<h4 id="JSONObject"><a href="#JSONObject" class="headerlink" title="JSONObject"></a>JSONObject</h4><p>这个类是这四个类中最关键的一个，它表示了一个可更改且无序的键值对集合，更简单一点，可以直接认为这个类表示了一个 JSON 的信息。在 JSON 字符串中，其表示了一个包裹在花括号的字符串，键和值之间使用冒号隔开，键值和键值之间使用逗号隔开的。<br>在这个类中，其键名是唯一且不为null的字符串。而值则可以为 JSONObject、JSONArray、Strings、Booleans、Integers、Longs、Double 或者 JSONObject.NULL。特别注意，这里的NULL可不是null，而是JSONObject的一个内部类。对于这个类，在使用时要要注意的就是在调用时，其会按照调用的方法进行类型转换。</p>
<p><strong>主要构造方法：</strong>  </p>
<p><code>public JSONObject(String json)</code><br>Creates a new JSONObject with name/value mappings from the JSON string.<br>例：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String json = <span class="string">"&#123;\"first_name\":\"DevMcry\",\"last_name\":\"Yu\"&#125;"</span>;</span><br><span class="line">JSONObject jsonObject = <span class="keyword">new</span> JSONObject(json);</span><br></pre></td></tr></table></figure></p>
<p><strong>主要方法：</strong>  </p>
<ul>
<li><code>public Object get (String name)</code><br>Returns the value mapped by name, or throws if no such mapping exists.</li>
</ul>
<p>例：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Stirng firstName = jsonObject.get(<span class="string">"first_name"</span>);</span><br><span class="line">String lastName = jsonObject.getString(<span class="string">"last_name"</span>);</span><br></pre></td></tr></table></figure></p>
<p><code>getXXX(...)</code> 根据 name 获取一个值，此方法如果发生失败，例如没有找到对应的键值或类型转换失败，就会抛出一个 JSONException 异常。</p>
<ul>
<li><code>public Object opt (String name)</code><br>Returns the value mapped by name, or null if no such mapping exists</li>
</ul>
<p>例：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String firstName = jsonObject.opt(<span class="string">"first_name"</span>);</span><br><span class="line">String lastName = jsonObject.optString(<span class="string">"last_name"</span>,<span class="string">"nobody"</span>);</span><br></pre></td></tr></table></figure></p>
<p><code>optXXX(...)</code> 此类方法用于获取一个值，但是如果发生失败，其不会抛出异常，而是返回一个默认值。</p>
<ul>
<li><code>public JSONObject put (String name, Object value)</code><br>Maps name to value, clobbering any existing name/value mapping with the same name. If the value is null, any existing mapping for name is removed.</li>
</ul>
<p>例：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">jsonObject.put(<span class="string">"sex"</span>,<span class="string">"male"</span>);</span><br><span class="line">jsonObject.put(<span class="string">"last_name"</span>,<span class="keyword">null</span>);</span><br></pre></td></tr></table></figure></p>
<p>put()此类方法就是向对象中插入一个键值对。<strong>特别注意其插入NULL和null是不同的：</strong><br><code>put(name, null)</code> 这个方法调用将会移除该对象中对应的键值。<br><code>put(name, JSONObject.NULL)</code> 则将会往对象中添加一个键值，其值为 JSONObject.NULL。</p>
<ul>
<li><code>public String toString (int indentSpaces)</code><br>Encodes this object as a human readable JSON string for debugging.</li>
</ul>
<p>例：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">jsonObject.toString(<span class="number">4</span>);</span><br><span class="line"><span class="comment">// output</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"first_name"</span>: <span class="string">"DevMcry"</span>,</span><br><span class="line">  <span class="string">"sex"</span>: <span class="string">"male"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/13/Android编程权威指南第14章学习笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="DevMcry">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevMcry">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/13/Android编程权威指南第14章学习笔记/" itemprop="url">Android编程权威指南第14章学习笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-13T15:49:51+08:00">
                2018-08-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h2 id="SQLite数据库"><a href="#SQLite数据库" class="headerlink" title="SQLite数据库"></a>SQLite数据库</h2><p>SQLite是类似于MySQL和PostgreSQL的开源关系型数据库。不同于其他数据库的是，SQLite使用单个文件存储数据，读写数据时使用SQLite库。Android标准库包含SQLite库以及配套的一些Java辅助类。</p>
<h3 id="定义-schema"><a href="#定义-schema" class="headerlink" title="定义 schema"></a>定义 schema</h3><p>定义schema的方式众多，如何选择往往因人而异。但所有方式都有一个共同的目标：“不要重复造轮子。”实际上，这也是人人都应遵守的编程准则：多花时间思考复用代码的编写和调用，避免在应用中到处使用重复代码。</p>
<h3 id="创建初始数据库"><a href="#创建初始数据库" class="headerlink" title="创建初始数据库"></a>创建初始数据库</h3><p>(1) 确认目标数据库是否存在。<br>(2) 如果不存在，首先创建数据库，然后创建数据表并初始化数据。<br>(3) 如果存在，打开并确认XXXDbSchema是否为最新（后续版本可能有改动）。<br>(4) 如果是旧版本，就先升级到最新版本。<br>以上工作可借助Android的SQLiteOpenHelper类处理。<br>调用 <code>getWritableDatabase()</code> 方法时，CrimeBaseHelper会做如下工作。<br>(1) 打开/data/data/…/databases/crimeBase.db数据库；如果<br>不存在，就先创建crimeBase.db数据库文件。<br>(2) 如果是首次创建数据库，就调用<code>onCreate(SQLiteDatabase)</code>方法，然后保存最新的版本号。<br>(3) 如果已创建过数据库，首先检查它的版本号。如果CrimeBaseHelper中的版本号更高，就调用<code>onUpgrade(SQLiteDatabase, int, int)</code>方法升级。<br>最后做个总结：onCreate(SQLiteDatabase)方法负责创建初始数据库；<code>onUpgrade(SQLiteDatabase, int, int)</code>方法负责与升级相关的工作。<br>使用 <code>db.execSQL(...)</code> 方法创建数据表。相比其他数据库，创建SQLite数据库表省事又简单：创建表字段时，不需要指定表字段类型。</p>
<h3 id="写入数据库"><a href="#写入数据库" class="headerlink" title="写入数据库"></a>写入数据库</h3><h4 id="使用-ContantValues"><a href="#使用-ContantValues" class="headerlink" title="使用 ContantValues"></a>使用 ContantValues</h4><p>负责处理数据库写入和更新操作的辅助类是ContentValues。它是一个键值存储类，类似于<br>Java的HashMap和前面用过的Bundle。不同的是，ContentValues只能用于处理SQLite数据。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> ContentValues <span class="title">getContentValues</span><span class="params">(Crime crime)</span> </span>&#123;</span><br><span class="line">  ContentValues values = <span class="keyword">new</span> ContentValues();</span><br><span class="line"></span><br><span class="line">  values.put(CrimeTable.Cols.UUID, crime.getId().toString());</span><br><span class="line">  values.put(CrimeTable.Cols.TITLE, crime.getTitle());</span><br><span class="line">  values.put(CrimeTable.Cols.DATE, crime.getDate().getTime());</span><br><span class="line">  values.put(CrimeTable.Cols.SOLVED, crime.isSolved() ? <span class="number">1</span> : <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> values;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="插入和更新记录"><a href="#插入和更新记录" class="headerlink" title="插入和更新记录"></a>插入和更新记录</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*插入记录*/</span></span><br><span class="line">ContentValues values = getContentValues(crime);</span><br><span class="line">mDatabase.insert(CrimeTable.NAME, <span class="keyword">null</span>, values);</span><br></pre></td></tr></table></figure>
<p><code>insert(String, String, ContentValues)</code> 方法的第一和第三个参数很重要，第二个很少用到。传入的第一个参数是数据表名 ，第三个是要写入的数据。第二个参数称为nullColumnHack。它有什么用途呢？别急，举个例子你就明白了。假设你想调用 <code>insert(...)</code> 方法，但传入了ContentValues空值。这时，SQLite不干了，<code>insert(...)</code> 方法调用只能以失败告终。然而，如果能以uuid值作为nullColumnHack传入的话，SQLite就可以忽略ContentValues空值，而且还会自动传入一个带uuid且值为null的ContentValues。结果，<code>insert(...)</code>方法得以成功调用并插入了一条新记录。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*读取记录*/</span></span><br><span class="line">String uuidString = crime.getId().toString();</span><br><span class="line">ContentValues values = getContentValues(crime);</span><br><span class="line">mDatabase.update(CrimeTable.NAME, values,CrimeTable.Cols.UUID + <span class="string">" = ?"</span>,</span><br><span class="line"><span class="keyword">new</span> String[] &#123; uuidString &#125;);</span><br></pre></td></tr></table></figure></p>
<p><code>update(String, ContentValues, String, String[])</code>方法类似于<code>insert(...)</code>方法，向其传入要更新的数据表名和为表记录准备的ContentValues。然而，与<code>insert(...)</code>方法不同的是，你要确定该更新哪些记录。具体的做法是：创建where子句（第三个参数），然后指定where子句中的参数值（String[]数组参数）。问题来了，为什么不直接在where子句中放入uuidString呢？这可比使用?然后传入String[]简单多了！事实上，很多时候，String本身会包含SQL代码。如果将它直接放入query语句中，这些代码可能会改变query语句的含义，甚至会修改数据库资料。这实际就是SQL脚本注入，其危害相当严重。使用?的话，就不用关心String包含什么，代码执行的效果肯定就是我们想要的。因此，建议你保持这种良好的编码习惯。</p>
<h3 id="读取数据库"><a href="#读取数据库" class="headerlink" title="读取数据库"></a>读取数据库</h3><p>读取数据需要用到 <code>SQLiteDatabase.query(...)</code> 方法。这个方法有好几个重载版本。我们<br>要用的版本如下：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public Cursor query(</span><br><span class="line">  String table,</span><br><span class="line">  String[] columns,</span><br><span class="line">  String where,</span><br><span class="line">  String[] whereArgs,</span><br><span class="line">  String groupBy,</span><br><span class="line">  String having,</span><br><span class="line">  String orderBy,</span><br><span class="line">  String limit)</span><br></pre></td></tr></table></figure></p>
<p>参数 table 是要查询的数据表。参数 columns 指定要依次获取哪些字段的值。参数 where 和 whereArgs 的作用与<code>update(...)</code>方法中的一样。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> Cursor <span class="title">queryCrimes</span><span class="params">(String whereClause, String[] whereArgs)</span> </span>&#123;</span><br><span class="line">  Cursor cursor = mDatabase.query(</span><br><span class="line">    CrimeTable.NAME,</span><br><span class="line">    <span class="keyword">null</span>, <span class="comment">// Columns - null selects all columns</span></span><br><span class="line">    whereClause,</span><br><span class="line">    whereArgs,</span><br><span class="line">    <span class="keyword">null</span>, <span class="comment">// groupBy</span></span><br><span class="line">    <span class="keyword">null</span>, <span class="comment">// having</span></span><br><span class="line">    <span class="keyword">null</span> <span class="comment">// orderBy</span></span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">return</span> cursor;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="使用CusorWarpper"><a href="#使用CusorWarpper" class="headerlink" title="使用CusorWarpper"></a>使用CusorWarpper</h4><p>Cursor 是个神奇的表数据处理工具。其功能就是封装数据表中的原始字段值。从 Cursor 获取数据的代码大致如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String uuidString = cursor.getString(cursor.getColumnIndex(CrimeTable.Cols.UUID));</span><br><span class="line">String title = cursor.getString(cursor.getColumnIndex(CrimeTable.Cols.TITLE));</span><br><span class="line"><span class="keyword">long</span> date = cursor.getLong(cursor.getColumnIndex(CrimeTable.Cols.DATE));</span><br><span class="line"><span class="keyword">int</span> isSolved = cursor.getInt(cursor.getColumnIndex(CrimeTable.Cols.SOLVED));</span><br></pre></td></tr></table></figure></p>
<p>考虑到代码复用,不如使用 CursorWrapper 封装 Cursor 的对象,然后再添加有用的拓展方法。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CrimeCursorWrapper</span> <span class="keyword">extends</span> <span class="title">CursorWrapper</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">CrimeCursorWrapper</span><span class="params">(Cursor cursor)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>(cursor);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>以上代码创建了一个 Cursor 封装类。该类继承了 Cursor 类的全部方法。注意，这样封装的目的就是定制新方法，以方便操作内部 Cursor 。</p>
<h4 id="创建模型层对象"><a href="#创建模型层对象" class="headerlink" title="创建模型层对象"></a>创建模型层对象</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  cursor.moveToFirst();</span><br><span class="line">  <span class="keyword">while</span> (!cursor.isAfterLast()) &#123;</span><br><span class="line">    <span class="comment">//do something</span></span><br><span class="line">    cursor.moveToNext();</span><br><span class="line">  &#125;</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">  cursor.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>数据库 cursor 之所以被称为 cursor ，是因为它内部就像有根手指似的，总是指向查询的某个地方。因此，要从 cursor 中取出数据，首先要调用<code>moveToFirst()</code>方法移动虚拟手指指向第一个元素。读取行记录后，再调用<code>moveToNext()</code>方法，读取下一行记录，直到<code>isAfterLast()</code>说没有数据可取为止。最后，别忘了调用 Cursor 的<code>close()</code>方法关闭它，否则会出错：轻则应用报错，重则应用崩溃。</p>
<h3 id="深入学习：应用上下文"><a href="#深入学习：应用上下文" class="headerlink" title="深入学习：应用上下文"></a>深入学习：应用上下文</h3><p>应用上下文有什么特别呢？就上例来看，为什么要用应用上下文，而不直接用activity作为context呢？<br>要回答上述问题，关键就在于考虑它们的生命周期。只要有 activity 在， Android 肯定也创建了 application 对象。用户在应用的不同界面间导航时，各个 activity 时而存在时而消亡，但 application 对象不会受任何影响。可以说，它的生命周期要比任何 activity 都长。 CrimeLab 是一个单例。这表明，一旦创建，它就会一直存在，直至整个应用进程被销毁。由代码可知， CrimeLab 引用着 mContext 对象。显然，如果把 activity 作为 mContext 对象保存的话，这个由 CrimeLab 一直引用着的 activity 肯定会免遭垃圾回收器的清理，即便用户跳转离开这个 activity 时也是如此。为了避免资源浪费，我们使用了应用上下文。这样， CrimeLab 仍可以引用Context对象，而 activity 的生死也不用受它束缚了。  </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/06/Android编程权威指南第13章学习笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="DevMcry">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevMcry">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/06/Android编程权威指南第13章学习笔记/" itemprop="url">Android编程权威指南第13章学习笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-06T14:47:31+08:00">
                2018-08-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h2 id="使用-AppCompat-库"><a href="#使用-AppCompat-库" class="headerlink" title="使用 AppCompat 库"></a>使用 AppCompat 库</h2><p>Android 5.0 (Lollipop) 引入工具栏这个新增组件。要整合使用 AppCompat 库,你需要:</p>
<ul>
<li>添加 AppCompat 依赖项;</li>
<li>使用一种 AppCompat 主题;</li>
<li>确保所有activity都是AppCompatActivity子类。<h3 id="工具栏菜单"><a href="#工具栏菜单" class="headerlink" title="工具栏菜单"></a>工具栏菜单</h3><blockquote>
<p>工具栏菜单由菜单项（又称操作项）组成，它占据着工具栏的右上方区域。菜单项的操作应用于当前屏幕，甚至整个应用。</p>
</blockquote>
</li>
</ul>
<h4 id="1-在XML文件中定义菜单"><a href="#1-在XML文件中定义菜单" class="headerlink" title="1. 在XML文件中定义菜单"></a>1. 在XML文件中定义菜单</h4><p>菜单是一种类似于布局的资源。创建菜单定义文件并将其放置在 res/menu 目录下，Android会自动生成相应的资源ID。随后，在代码中实例化菜单时，就可以直接使用。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">menu</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">item</span></span></span><br><span class="line"><span class="tag">      <span class="attr">android:id</span>=<span class="string">"@+id/new_crime"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">android:icon</span>=<span class="string">"@android:drawable/ic_menu_add"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">android:title</span>=<span class="string">"@string/new_crime"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">app:showAsAction</span>=<span class="string">"ifRoom|withText"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">menu</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>其中 showAsAction 属性用于指定菜单项是显示在工具栏上，还是隐藏于溢出菜单(overflow menu)。该属性当前设置为 ifRoom 和 withText 的组合值。因此，只要空间足够，菜单项图标及其文字描述都会显示在工具栏上。如果空间仅够显示菜单项图标，文字描述就不会显示。如果空间大小不够显示任何项，菜单项就会隐藏到溢出菜单中。如果溢出菜单包含其他项，它们就会以三个点表示(位于工具栏最右端)。属性 showAsAction 还有另外两个可选值：always 和 never 。不推荐使用 always ，应尽量使用 ifRoom 属性值，让操作系统决定如何显示菜单项。对于那些很少用到的菜单项， never 属性值是个不错的选择。总之，为了避免用户界面混乱，工具栏上只应放置常用菜单项。  </p>
<h4 id="2-创建菜单"><a href="#2-创建菜单" class="headerlink" title="2. 创建菜单"></a>2. 创建菜单</h4><p>在代码中，Activity 类提供了管理菜单的回调函数。需要选项菜单时，Android 会调用 Activity 的 <code>onCreateOptionsMenu(Menu)</code> 方法。同样 Fragment 也有一套自己的选项菜单回调函数。<br>创建菜单和响应菜单项选择事件的两个回调方法：<br><code>public void onCreateOptionsMenu(Menu menu, MenuInflater inflater)</code><br><code>public boolean onOptionsItemSelected(MenuItem item)</code></p>
<p>覆盖 <code>onCreateOptionsMenu(Menu, MenuInflater)</code>方法来实例化菜单,在以上方法中调用 <code>MenuInflater.inflate(int, Menu)</code> 方法并传入菜单文件的资源ID，将布局文件中定义的菜单项目填充到 Menu 实例中。</p>
<p><code>Fragment.onCreateOptionsMenu(Menu, MenuInflater)</code> 方法是由 FragmentManager 负责调用的。因此，当 activity 接收到操作系统的 <code>onCreateOptionsMenu(...)</code> 方法回调请求时，我们必须明确告诉 FragmentManager ：其管理的 fragment 应接收 <code>onCreateOptionsMenu(...)</code> 方法的调用指令。要通知 FragmentManager ，需调用以下方法：<br><code>public void setHasOptionsMenu(boolean hasMenu)</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line">    setHasOptionsMenu(<span class="keyword">true</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="3-相应菜单项选择"><a href="#3-相应菜单项选择" class="headerlink" title="3. 相应菜单项选择"></a>3. 相应菜单项选择</h4><p>用户点击菜单中的菜单项时，fragment 会收到 <code>onOptionsItemSelected(MenuItem)</code> 方法的回调请求。传入该方法的参数是一个描述用户选择的 MenuItem 实例。菜单通常包含多个菜单项。通过检查菜单项ID，可确定被选中的是哪个菜单项，然后作出相应的响应。这个ID实际就是在菜单定义文件中赋予菜单项的资源ID。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onOptionsItemSelected</span><span class="params">(MenuItem item)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (item.getItemId()) &#123;</span><br><span class="line">      <span class="keyword">case</span> R.id...:</span><br><span class="line">      <span class="comment">//响应事件</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">super</span>.onOptionsItemSelected(item);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="层级式导航"><a href="#层级式导航" class="headerlink" title="层级式导航"></a>层级式导航</h3><blockquote>
<p>后退键导航又称为临时性导航，只能返回到上一次浏览过的用户界面；而层级式导航（hierarchical navigation，有时又称为ancestral navigation）可在应用内逐级向上导航。有了层级式导航，用户可点击工具栏左边的向上按钮向上导航。</p>
</blockquote>
<p>打开 AndroidManifest.xml ，添加parentActivityName属性来开启应用的层级式导航。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">  <span class="attr">android:name</span>=<span class="string">".currentActivityName"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">android:parentActivityName</span>=<span class="string">"parentActivityName"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><strong>层级式导航的工作原理</strong><br>用户点击向上按钮自当前界面向上导航时，如下的intent会被创建：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Intent intent = <span class="keyword">new</span> Intent(<span class="keyword">this</span>, parentActivity.class);</span><br><span class="line">intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);</span><br><span class="line">startActivity(intent);</span><br><span class="line">finish();</span><br></pre></td></tr></table></figure></p>
<p>FLAG_ACTIVITY_CLEAR_TOP 指示 Android 在回退栈中寻找指定的 activity 实例。如果实例存在，<br>则弹出栈内所有其他 activity ，让启动的目标 activity 出现在栈顶（显示在屏幕上）。</p>
<h3 id="可选菜单项"><a href="#可选菜单项" class="headerlink" title="可选菜单项"></a>可选菜单项</h3><p>可通过以下语句实现设置工具栏子标题:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">AppCompatActivity activity = (AppCompatActivity) getActivity();</span><br><span class="line">activity.getSupportActionBar().setSubtitle(subtitle);</span><br></pre></td></tr></table></figure></p>
<h3 id="工具栏与操作栏"><a href="#工具栏与操作栏" class="headerlink" title="工具栏与操作栏"></a>工具栏与操作栏</h3><p>首先，两者给我们最直观的印象就是工具栏界面更美观。工具栏的左边不再放置图标，右边菜单项的间距也更小。另外就是向上的导航按钮。操作栏上的这个按钮不够醒目，只是旁边按钮的附属物。除了视觉上的差异，在使用上，工具栏比操作栏更灵活。操作栏的使用限制多多，比如，整个应用只能配置一个操作栏且位置及尺寸必须固定（在屏幕顶部）。工具栏就没有这些限制。本章使用的工具栏应用了AppCompat主题。如果有需要，也可以通过activity和fragment布局定制标准视图的工具栏。可以在屏幕的任何位置摆放工具栏，甚至可以在同一屏配置多个工具栏。应用设计的自由度由此大大提高了，例如，可以为每个fragment定制专用工具栏。可以想象，在同一个用户界面托管多个fragment时，每个fragment都由自己的工具栏控制，这比所有fragment共享一个位于屏幕顶部的工具栏方便多了。此外，工具栏还能支持内嵌视图和调整高度，这极大地丰富了应用的交互模式。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/30/Android编程权威指南第12章学习笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="DevMcry">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevMcry">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/30/Android编程权威指南第12章学习笔记/" itemprop="url">Android编程权威指南第12章学习笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-30T16:04:19+08:00">
                2018-07-30
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h2 id="Fragment间的数据传递"><a href="#Fragment间的数据传递" class="headerlink" title="Fragment间的数据传递"></a>Fragment间的数据传递</h2><p>要实现同一activity托管的两个fragment之间的数据传递，首先需要新建一个 <code>newInstance()</code> 方法,然后将数据作为argument附加给fragment。<br>为返回数据，并更新模型层以及对应视图，需将数据打包为extra并附加到Intent上，然后调用Fragment的 <code>onActivityResult(...)</code> 方法，并传入准备好的Intent参数。</p>
<h3 id="1-传递数据给Fragment"><a href="#1-传递数据给Fragment" class="headerlink" title="1. 传递数据给Fragment"></a>1. 传递数据给Fragment</h3><p>要传递数据给Fragment，需将它保存在Fragment的argument bundle中。这样，Fragment就能直接获取它。创建和设置fragment argument通常是在newInstance()方法中完成的(代替fragment构造方法)<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DatePickerFragment</span> <span class="keyword">extends</span> <span class="title">DialogFragment</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String ARG_DATE = <span class="string">"date"</span>;</span><br><span class="line">    <span class="keyword">private</span> DatePicker mDatePicker;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> DatePickerFragment <span class="title">newInstance</span><span class="params">(Date date)</span> </span>&#123;</span><br><span class="line">      Bundle args = <span class="keyword">new</span> Bundle();</span><br><span class="line">      args.putSerializable(ARG_DATE, date);</span><br><span class="line">      DatePickerFragment fragment = <span class="keyword">new</span> DatePickerFragment();</span><br><span class="line">      fragment.setArguments(args);</span><br><span class="line">      <span class="keyword">return</span> fragment;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line">最后用 `Fragment.newInstance(Date)` 方法替换Fragment的构造方法。  </span><br><span class="line">```java</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> View <span class="title">onCreateView</span><span class="params">(LayoutInflater inflater,ViewGroup container,Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    mDateButton = (Button)v.findViewById(R.id.crime_date);</span><br><span class="line">    mDateButton.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">        FragmentManager manager = getFragmentManager()</span><br><span class="line">        DatePickerFragment dialog = <span class="keyword">new</span> DatePickerFragment();</span><br><span class="line">        DatePickerFragment dialog = DatePickerFragment.newInstance(mCrime.getDate());</span><br><span class="line">        dialog.show(manager, DIALOG_DATE);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">return</span> v;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="2-返回数据给Fragment"><a href="#2-返回数据给Fragment" class="headerlink" title="2. 返回数据给Fragment"></a>2. 返回数据给Fragment</h3><p>如果是activity的数据回传,我们调用 <code>startActivityForResult(...)</code> 方法,ActivityManager负责跟踪管理activity父子关系。回传数据后,子activity被销毁,但ActivityManager知道接收数据的是哪个activity。  </p>
<h4 id="a-设置目标fragment"><a href="#a-设置目标fragment" class="headerlink" title="a. 设置目标fragment"></a>a. 设置目标fragment</h4><p>利用 <code>public void setTargetFragment(Fragment fragment, int requestCode)</code> 方法建立关联。该方法有两个参数：目标fragment以及类似于传入 <code>startActivityForResult(...)</code> 方法的请求代码。需要时，目标fragment使用请求代码确认是哪个fragment在回传数据。目标fragment和请求代码由FragmentManager负责跟踪管理，可调用fragment(设置目标fragment的fragment)的 <code>getTargetFragment()</code> 方法和 <code>getTargetRequestCode()</code> 方法获取它们。</p>
<h4 id="b-传递数据给目标fragment"><a href="#b-传递数据给目标fragment" class="headerlink" title="b.传递数据给目标fragment"></a>b.传递数据给目标fragment</h4><p>建立联系后需将数据回传给目标fragment，调用 <code>onActivityResult(int, int, Intent)</code> 方法将回传数据将作为extra附加给Intent。 <code>Activity.onActivityResult(...)</code> 方法是ActivityManager在子activity被销毁后调用的父activity方法。处理activity间的数据返回时，ActivityManager会自动调用 <code>Activity.onActivity-Result(...)</code> 方法。父activity接收到 <code>Activity.onActivityResult(...)</code> 方法调用命令后，其FragmentManager会调用对应fragment的 <code>Fragment.onActivityResult(...)</code> 方法。该方法包含以下三个参数：</p>
<ul>
<li>请求代码：与传入setTargetFragment(…)方法的代码相匹配，告诉目标fragment返回<br>结果来自哪里。</li>
<li>结果代码：决定下一步该采取什么行动。</li>
<li>Intent： 包含extra数据。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onActivityResult</span><span class="params">(<span class="keyword">int</span> requestCode, <span class="keyword">int</span> resultCode, Intent data)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (resultCode != Activity.RESULT_OK) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (requestCode == REQUEST_DATE) &#123;</span><br><span class="line">      Date date = (Date) data.getSerializableExtra(DatePickerFragment.EXTRA_DATE);</span><br><span class="line">      <span class="comment">//在这里对数据进行处理</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="代码封装"><a href="#代码封装" class="headerlink" title="代码封装"></a>代码封装</h3><p>除手动封装代码的方式外， 还可以使用Android Studio 的内置工具。高亮选取设置的代码右键单击并选择Refactor → Extract → Method…菜单项。设置方法为私有并将其命名。点击OK按钮，Android Studio会提示还有其他地<br>方使用了这段代码。点击Yes允许它自动处理。然后确认该方法封装完成并在相应地方已调用，</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/25/Android编程权威指南第11章挑战练习/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="DevMcry">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevMcry">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/25/Android编程权威指南第11章挑战练习/" itemprop="url">Android编程权威指南第11章挑战练习</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-25T22:53:00+08:00">
                2018-07-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<h2 id="恢复CrimeFragment的边距"><a href="#恢复CrimeFragment的边距" class="headerlink" title="恢复CrimeFragment的边距"></a>恢复CrimeFragment的边距</h2><p>由于ViewPager的布局参数不支持边距设置，所以<code>android:layout_margin=&quot;16dp&quot;</code> 并没有生效。这时候我们只需要把代码替换为<code>android:padding=&quot;16dp&quot;</code>即可。</p>
<h2 id="添加Jump-to-First-按钮和Jump-to-Last-按钮"><a href="#添加Jump-to-First-按钮和Jump-to-Last-按钮" class="headerlink" title="添加Jump to First 按钮和Jump to Last 按钮"></a>添加Jump to First 按钮和Jump to Last 按钮</h2><blockquote>
<p>给CrimePagerActivity添加两个按钮。允许使用它们快速跳至第一条和最后一条crime记录。当然，要注意控制，查看第一条记录时应禁用Jump to First按钮，查看最后一条时禁用Jump to Last按钮。</p>
</blockquote>
<p><strong>解决思路:</strong><br>利用ViewPager的<code>addOnPageChangeListener()</code>方法实现<br><code>ViewPager.OnPageChangeListener()</code>实现以下三个方法:</p>
<ul>
<li><code>onPageScrolled</code></li>
<li><code>onPageSelected</code></li>
<li><code>onPageScrollStateChanged</code></li>
</ul>
<p>我们要做的就是利用<code>onPageSelected()</code>方法去设定Button的Enabled属性</p>
<p><strong>1. 修改 activity_crime_pager.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">    &lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">"vertical"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">android.support.v4.view.ViewPager</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/crime_view_pager"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_weight</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">android.support.v4.view.ViewPager</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">LinearLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:padding</span>=<span class="string">"16dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:weightSum</span>=<span class="string">"2"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/jump_to_first"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">"1"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">"@string/jump_to_first"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textAllCaps</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/jump_to_last"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"0dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_weight</span>=<span class="string">"1"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">"@string/jump_to_last"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textAllCaps</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>2.修改CrimePagerActivity.java</strong></p>
<pre><code class="java"><span class="meta">@Override</span>
<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(@Nullable Bundle savedInstanceState)</span> </span>{
    <span class="keyword">super</span>.onCreate(savedInstanceState);
    setContentView(R.layout.activity_crime_pager);
    ...
    jumpToFirst = findViewById(R.id.jump_to_first);
    jumpToFirst.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() {
        <span class="meta">@Override</span>
        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View view)</span> </span>{
            mViewPager.setCurrentItem(<span class="number">0</span>);
        }
    });
    jumpToLast = findViewById(R.id.jump_to_last);
    jumpToLast.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() {
        <span class="meta">@Override</span>
        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View view)</span> </span>{
            mViewPager.setCurrentItem(mCrimes.size() - <span class="number">1</span>);
        }
    });
    mViewPager.addOnPageChangeListener(<span class="keyword">new</span> ViewPager.OnPageChangeListener() {
        <span class="meta">@Override</span>
        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPageScrolled</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">float</span> v, <span class="keyword">int</span> i1)</span> </span>{

        }
        <span class="meta">@Override</span>
        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPageSelected</span><span class="params">(<span class="keyword">int</span> i)</span> </span>{
            jumpToFirst.setEnabled(<span class="keyword">true</span>);
            jumpToLast.setEnabled(<span class="keyword">true</span>);
            <span class="keyword">if</span> (i == <span class="number">0</span>)
                jumpToFirst.setEnabled(<span class="keyword">false</span>);
            <span class="keyword">else</span> <span class="keyword">if</span> (i == mCrimes.size() - <span class="number">1</span>)
                jumpToLast.setEnabled(<span class="keyword">false</span>);
        }
        <span class="meta">@Override</span>
        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPageScrollStateChanged</span><span class="params">(<span class="keyword">int</span> i)</span> </span>{

        }
    });
    ...
}
</code></pre>
<p>运行程序查看结果</p>
<p><strong>本章小结</strong><br>ViewPager在某种程度上类似于RecyclerView。RecyclerView需借助于Adapter提供视图。同样，ViewPager需要PagerAdapter的支持。不过，相较于RecyclerView与Adapter间的协同工作，ViewPager与PagerAdapter间的配合要复杂得多。好在Google提供了PagerAdapter的子类FragmentStatePagerAdapter，它能协助处理许多细节问题。<br>FragmentPagerAdapter是另外一种可用的PagerAdapter，其用法与FragmentStatePagerAdapter基本一致。唯一的区别在于，卸载不再需要的fragment时，各自采用的处理方法有所不同。<br>FragmentStatePagerAdapter类名中的“state”表明：在销毁fragment时，可在<code>onSaveInstanceState(Bundle)</code>方法中保存fragment的Bundle信息。用户切换回来时，保存的实例状态可用来生成新的fragment。<br>相比之下，FragmentPagerAdapter有不同的做法。对于不再需要的fragment，FragmentPagerAdapter会选择调用事务的<code>detach(Fragment)</code>方法来处理它，而非<code>remove(Fragment)</code>方法。也就是说，FragmentPagerAdapter只是销毁了fragment的视图，而fragment实例还保留在FragmentManager中。因此，FragmentPagerAdapter创建的fragment永远不会被销毁。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/06/写在开始/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="DevMcry">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevMcry">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/06/写在开始/" itemprop="url">写在开始</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-06T00:59:47+08:00">
                2017-12-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p><strong>靡不有初 鲜克有终</strong></p>
</blockquote>
<p>选择你所热爱的，热爱你所选择的。</p>
<p>不忘初心，方得始终。</p>
<p>DevMcry，你要加油。</p>
<p>路还长着呢，你得自己走。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/06/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="DevMcry">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="DevMcry">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/06/hello-world/" itemprop="url">Hello World</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-06T00:14:42+08:00">
                2017-12-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.<br>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/12/06/hello-world/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.png"
                alt="DevMcry" />
            
              <p class="site-author-name" itemprop="name">DevMcry</p>
              <p class="site-description motion-element" itemprop="description">间歇性热爱学习</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2017 &mdash; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">DevMcry</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
